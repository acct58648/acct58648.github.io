<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Demo for F-StrIPE</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <main>
        <h2>Demo page for F-StrIPE: Fast Structure-Informed Positional Encoding for Music Generation</h2>
        For this demo page, we chose to display a minimal set of examples for the melody harmonization task.
        We display two settings: train on 16 bars + test on 16 bars and train on 16 bars + test on 64 bars.
        We show four methods for the first setting (X-StrIPE, SPE, F-StrIPE:C and F-StrIPE:SFF:C) and three (SPE, F-StrIPE:C and F-StrIPE:SFF:C) for the second. For the second, it is not possible to perform inference on 64 bars for X-StrIPE.
        For each method, we give the example with the best score on the four metrics we reported in the paper:
        Chroma Similarity (best = highest), Self-Similarity Matrix Distance (best = lowest), Grooving Similarity (best = highest) and Note Density Distance (best = lowest).
        We additionally also provide the melody-only MIDI file so you can compare what the added accompaniment contributes to the song.
        <br>
        Upon acceptance, we will provide a more detailed demo page with samples for the easier next-timestep prediction task.
        <h3>Setting: Train on 16 bars, test on 16 bars</h3>

        <!-- X-StrIPE: 3 -->

        <h4>Method: X-StrIPE</h4><br>
        <h5>Chroma similarity</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/40/melody_44.mid"
              sound-font visualizer="#Vis1">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis1"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/40/pred_44.mid"
              sound-font visualizer="#Vis2">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis2"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/40/melody_159.mid"
              sound-font visualizer="#Vis3">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis3"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/40/pred_159.mid"
              sound-font visualizer="#Vis4">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis4"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/40/melody_172.mid"
              sound-font visualizer="#Vis5">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis5"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/40/pred_172.mid"
              sound-font visualizer="#Vis6">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis6"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/40/melody_317.mid"
              sound-font visualizer="#Vis7">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis7"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/40/bin_paper/pred_317.mid"
              sound-font visualizer="#Vis8">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis8"></midi-visualizer>
          </div>
        </div>

        <!-- SPE: 3 -->

        <h4>Method: SPE</h4><br>
        <h5>Chroma similarity</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody </h5><br>
            <midi-player
              src="3/60/melody_50.mid"
              sound-font visualizer="#Vis9">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis9"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/60/pred_50.mid"
              sound-font visualizer="#Vis10">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis10"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody </h5><br>
            <midi-player
              src="3/60/melody_215.mid"
              sound-font visualizer="#Vis11">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis11"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment </h5><br>
            <midi-player
              src="3/60/pred_215.mid"
              sound-font visualizer="#Vis12">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis12"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/60/melody_227.mid"
              sound-font visualizer="#Vis13">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis13"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/60/pred_227.mid"
              sound-font visualizer="#Vis14">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis14"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>
        
        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/60/melody_240.mid"
              sound-font visualizer="#Vis15">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis15"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/60/pred_240.mid"
              sound-font visualizer="#Vis16">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis16"></midi-visualizer>
          </div>
        </div>

        <!-- F-StrIPE:C: 3 -->

        <h4>Method: F-StrIPE:C</h4><br>
        <h5>Chroma similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/102/melody_401.mid"
              sound-font visualizer="#Vis17">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis17"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/102/pred_401.mid"
              sound-font visualizer="#Vis18">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis18"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/102/melody_395.mid"
              sound-font visualizer="#Vis19">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis19"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/102/pred_395.mid"
              sound-font visualizer="#Vis20">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis20"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/102/melody_279.mid"
              sound-font visualizer="#Vis21">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis21"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/102/pred_279.mid"
              sound-font visualizer="#Vis22">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis22"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/102/melody_407.mid"
              sound-font visualizer="#Vis23">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis23"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/102/pred_407.mid"
              sound-font visualizer="#Vis24">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis24"></midi-visualizer>
          </div>
        </div>

        <!-- F-StrIPE:SFF:C: 3 -->

        <h4>Method: F-StrIPE:SFF:C</h4><br>
        <h5>Chroma similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/85/melody_292.mid"
              sound-font visualizer="#Vis25">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis25"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/85/pred_292.mid"
              sound-font visualizer="#Vis26">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis26"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/85/melody_399.mid"
              sound-font visualizer="#Vis27">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis27"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/85/pred_399.mid"
              sound-font visualizer="#Vis28">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis28"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/85/melody_57.mid"
              sound-font visualizer="#Vis29">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis29"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/85/pred_57.mid"
              sound-font visualizer="#Vis30">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis30"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="3/85/melody_5.mid"
              sound-font visualizer="#Vis31">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis31"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="3/85/pred_5.mid"
              sound-font visualizer="#Vis32">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis32"></midi-visualizer>
          </div>
        </div>


        <!-- SPE: 4 -->

        <h4>Method: SPE</h4><br>
        <h5>Chroma similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody </h5><br>
            <midi-player
              src="4/60/melody_47.mid"
              sound-font visualizer="#Vis33">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis33"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/60/pred_47.mid"
              sound-font visualizer="#Vis34">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis34"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody </h5><br>
            <midi-player
              src="4/60/melody_21.mid"
              sound-font visualizer="#Vis35">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis35"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment </h5><br>
            <midi-player
              src="4/60/pred_21.mid"
              sound-font visualizer="#Vis36">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis36"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/60/melody_38.mid"
              sound-font visualizer="#Vis37">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis37"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/60/pred_38.mid"
              sound-font visualizer="#Vis38">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis38"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/60/melody_21.mid"
              sound-font visualizer="#Vis39">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis39"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/60/pred_21.mid"
              sound-font visualizer="#Vis40">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis40"></midi-visualizer>
          </div>
        </div>

        <!-- F-StrIPE:C: 4 -->

        <h4>Method: F-StrIPE:C</h4><br>
        <h5>Chroma similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/102/melody_64.mid"
              sound-font visualizer="#Vis41">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis41"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/102/pred_64.mid"
              sound-font visualizer="#Vis42">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis42"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/102/melody_66.mid"
              sound-font visualizer="#Vis43">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis43"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/102/pred_66.mid"
              sound-font visualizer="#Vis44">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis44"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/102/melody_71.mid"
              sound-font visualizer="#Vis45">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis45"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/102/pred_71.mid"
              sound-font visualizer="#Vis46">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis46"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/102/melody_66.mid"
              sound-font visualizer="#Vis47">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis47"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/102/pred_66.mid"
              sound-font visualizer="#Vis48">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis48"></midi-visualizer>
          </div>
        </div>

        <!-- F-StrIPE:SFF:C: 4 -->

        <h4>Method: F-StrIPE:SFF:C</h4><br>
        <h5>Chroma similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/85/melody_51.mid"
              sound-font visualizer="#Vis49">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis49"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/85/pred_51.mid"
              sound-font visualizer="#Vis50">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis50"></midi-visualizer>
          </div>
        </div>

        <h5>Self-Similarity Matrix Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/85/melody_8.mid"
              sound-font visualizer="#Vis51">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis51"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/85/pred_8.mid"
              sound-font visualizer="#Vis52">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis52"></midi-visualizer>
          </div>
        </div>

        <h5>Grooving Similarity</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/85/melody_67.mid"
              sound-font visualizer="#Vis53">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis53"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/85/pred_67.mid"
              sound-font visualizer="#Vis54">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis54"></midi-visualizer>
          </div>
        </div>

        <h5>Note Density Distance</h5>

        <div class="wrapper">
          <div class="box">
            <h5>Melody</h5><br>
            <midi-player
              src="4/85/melody_8.mid"
              sound-font visualizer="#Vis55">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis55"></midi-visualizer>
          </div>
          <div class="box">
            <h5>Melody + Accompaniment</h5><br>
            <midi-player
              src="4/85/pred_8.mid"
              sound-font visualizer="#Vis56">
            </midi-player>
            <midi-visualizer type="piano-roll" id="Vis56"></midi-visualizer>
          </div>
        </div>
        

    </main>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>
  </body>
</html>
